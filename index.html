<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="cmssh : Interactive shell for CMS experiment" />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>cmssh</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/dmwm/cmssh">View on GitHub</a>

          <h1 id="project_title">cmssh</h1>
          <h2 id="project_tagline">Interactive shell for CMS experiment</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/dmwm/cmssh/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/dmwm/cmssh/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>Welcome to cmssh project.</h1>

<p>The cmssh (CMS shell) is a part of <a href="http://cms.cern.ch/">CMS</a> software initiative to simplify your daily activity in CMS environment. Think of it as combination of data discovery, file mover and release management tools in one user-friendly shell which runs on your favorite OS, Mac or Linux. The code is based on <a href="http://ipython.org/">IPython</a> and provides access to find your favorite data, to copy desired LFNs from/to storage elements and local disk, manage your CMS releases, etc. Plus it is based on python, therefore you can extended as you wish, e.g. you can write function and use it in a shell, etc.</p>

<h1>How to set it up?</h1>

<p>Download <a href="https://raw.github.com/dmwm/cmssh/master/cmssh_install.py">cmssh_install.py</a> script and run it as following</p>

<pre><code>./cmssh_install.py --help
./cmssh_install.py --install --dir=your_install_dir
</code></pre>

<h1>How to use it?</h1>

<p>The usage of cmssh is very simple, in fact very similar to your shell. Here is a few basic commands you may find interesting:</p>

<h3>search for some data</h3>

<pre><code>find dataset=*CRUZET3*RAW
for r in results(): print r, type(r)
</code></pre>

<h3>ls/find/info command</h3>

<pre><code>ls /Cosmics/CRUZET3-v1/RAW
info /Cosmics/CRUZET3-v1/RAW
find file dataset=/Cosmics/CRUZET3-v1/RAW
find site dataset=/Cosmics/CRUZET3-v1/RAW
find run=160915
info run=160915
</code></pre>

<p>Every time you run a command there is <strong>results()</strong> function which capture its output. For example, for last command I can simply invoke <strong>results()</strong>, iterate over its items and print out item data members</p>

<pre><code>for r in results():
    print r.initLumi, type(r.initLumi), r.DeliveredLumi, type(r.DeliveredLumi)
</code></pre>

<h3>find lumi info</h3>

<pre><code>find lumi dataset=/Photon/Run2012A-29Jun2012-v1/AOD
find lumi block=/Photon/Run2012A-29Jun2012-v1/AOD#3e33ce8e-c44d-11e1-9a26-003048f0e1c6
find lumi file=/store/data/Run2012A/Photon/AOD/29Jun2012-v1/0000/001B241C-ADC3-E111-BD1D-001E673971CA.root
find lumi run=190704
find lumi {190704:[1,2,3,4], 201706:[1,2,3,67]}
</code></pre>

<h3>find dataset configuration</h3>

<pre><code>find config dataset=/SUSY_LM9_sftsht_8TeV-pythia6/Summer12-START50_V13-v1/GEN-SIM
</code></pre>

<h3>read commands</h3>

<pre><code>read https://cmsweb.cern.ch/couchdb/reqmgr_config_cache/7a2f69a2a0a6df3bf57ebd6586f184e1/configFile
find config dataset=/SUSY_LM9_sftsht_8TeV-pythia6/Summer12-START50_V13-v1/GEN-SIM &gt; config.txt
read config.txt
read https://twiki.cern.ch/twiki/bin/view/CMSPublic/WorkBookFWLitePython
</code></pre>

<h3>list/copy LFN to local disk</h3>

<pre><code>ls /store/data/CRUZET3/Cosmics/RAW/path/file.root
cp /store/data/CRUZET3/Cosmics/RAW/path/file.root .
</code></pre>

<h3>SE operations, e.g. list its content, create/delete directory, etc.</h3>

<pre><code>du T3_US_Cornell
ls T3_US_Cornell
ls T3_US_Cornell:/store/user/me
mkdir T3_US_Cornell:/store/user/me/foo
rmdir T3_US_Cornell:/store/user/me/foo
</code></pre>

<h3>copy local file to SE</h3>

<pre><code>cp file.root T3_US_Cornell:/store/user/me
</code></pre>

<h3>copy LFN from SE to local disk</h3>

<pre><code>cp T3_US_Cornell:/store/user/me/file.root .
</code></pre>

<h3>delete file on SE</h3>

<pre><code>rm T3_US_Cornell:/xrootdfs/cms/store/user/me/file.root
</code></pre>

<h3>copy LFN to SE area</h3>

<pre><code>cp /store/data/CRUZET3/Cosmics/RAW/path/file.root T3_US_Cornell:/store/user/me
</code></pre>

<h3>copy multiple files in background</h3>

<pre><code>cp /store/data/CRUZET3/Cosmics/RAW/path/file1.root . &amp;
cp /store/data/CRUZET3/Cosmics/RAW/path/file2.root . &amp;
</code></pre>

<h3>look-up transfer status</h3>

<pre><code>jobs list
</code></pre>

<h3>look-up job information at given site or dashboard</h3>

<pre><code>jobs site=T2_US_UCSD
jobs dashboard
</code></pre>

<h3>find user information and look-up user activity in dashboard</h3>

<pre><code>find user=oliver
jobs user=AikenOliver
</code></pre>

<h3>look-up available releases</h3>

<pre><code>releases
</code></pre>

<h3>install your favorite release</h3>

<pre><code>cmsrel CMSSW_5_2_0_pre1
</code></pre>

<h3>run cms job</h3>

<pre><code>cmsRun runevt_cfg.py
</code></pre>

<h1>Help and Support</h1>

<p>You can find cmssh help by typing <strong>cmshelp</strong> in your shell. For more information please contact the <a href="mailto:vkuznet@gmail.com">author</a>. For bugs please use GitHub <a href="https://github.com/dmwm/cmssh/issues">tracking system</a>.</p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">cmssh maintained by <a href="https://github.com/dmwm">dmwm</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
